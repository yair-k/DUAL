{"ast":null,"code":"import _toConsumableArray from\"C:/Users/yairk/OneDrive/Desktop/wasd-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/yairk/OneDrive/Desktop/wasd-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import useStopWatch from'./useStopWatch';import _ from'lodash';var INPUTS=Object.freeze({ARROW:['up','down','left','right'],LETTER:['w','a','s','d']});var VALID_KEYS={87:'w',65:'a',83:'s',68:'d',38:'up',40:'down',37:'left',39:'right'};var GAME_STATE={NEW:'new',RUNNING:'running',END:'end'};var useGame=function useGame(){var _useState=useState(20),_useState2=_slicedToArray(_useState,2),generateCount=_useState2[0],setGenerateCount=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),letterSequence=_useState4[0],setLetterSequence=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),arrowSequence=_useState6[0],setArrowSequence=_useState6[1];var _useStopWatch=useStopWatch(),elapsedTime=_useStopWatch.elapsedTime,startStopWatch=_useStopWatch.startStopWatch,stopStopWatch=_useStopWatch.stopStopWatch,resetStopWatch=_useStopWatch.resetStopWatch;var _useState7=useState({arrow:0,letter:0}),_useState8=_slicedToArray(_useState7,2),progress=_useState8[0],setProgress=_useState8[1];var _useState9=useState(GAME_STATE.NEW),_useState10=_slicedToArray(_useState9,2),gameState=_useState10[0],setGameState=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),letterLog=_useState12[0],setLetterLogs=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),arrowLog=_useState14[0],setArrowLogs=_useState14[1];// Generate new sequence \nvar _generateSequence=function generateSequence(){var sequenceArrow=[];var sequenceLetter=[];for(var i=0;i<generateCount;i++){sequenceArrow.push({key:\"arrow\".concat(i),input:INPUTS.ARROW[_.random(3)]});sequenceLetter.push({key:\"letter\".concat(i),input:INPUTS.LETTER[_.random(3)]});}setArrowSequence(sequenceArrow);setLetterSequence(sequenceLetter);};// Handle correct wasd⬆⬇⬅➡ inputs\nvar gameButtonPress=function gameButtonPress(keyCode){if(Object.keys(VALID_KEYS).includes(keyCode.toString())){if(gameState===GAME_STATE.NEW){startStopWatch();setGameState(GAME_STATE.RUNNING);}var enteredKey=VALID_KEYS[keyCode];if(arrowSequence.length>0){if(arrowSequence[0].input===enteredKey){setArrowSequence(arrowSequence.slice(1));logInput(enteredKey,'arrow',true);return true;}else if(INPUTS.ARROW.includes(enteredKey)){logInput(enteredKey,'arrow',false);return false;}}if(letterSequence.length>0){if(letterSequence[0].input===enteredKey){setLetterSequence(letterSequence.slice(1));logInput(enteredKey,'letter',true);return true;}else if(INPUTS.LETTER.includes(enteredKey)){logInput(enteredKey,'letter',false);return false;}}return false;}};// Check for game end\nuseEffect(function(){if(arrowSequence.length===0&&letterSequence.length===0&&gameState!=='new'){stopStopWatch();setGameState(GAME_STATE.END);}},[letterSequence,arrowSequence,stopStopWatch,gameState]);// Handle reset game\nvar _resetGame=function resetGame(){setGameState(GAME_STATE.NEW);stopStopWatch();resetStopWatch();_generateSequence();setLetterLogs([]);setArrowLogs([]);};// Update game progress on successful key input\nuseEffect(function(){var arrowCount=arrowSequence.length;var letterCount=letterSequence.length;setProgress({arrow:(generateCount-arrowCount)/generateCount,letter:(generateCount-letterCount)/generateCount});},[letterSequence,arrowSequence,setProgress,generateCount]);// Log User Input\nvar logInput=function logInput(key,type,wasCorrect){var newLog={key:key,type:type,timePressed:elapsedTime,correct:wasCorrect};if(INPUTS.LETTER.includes(key)){setLetterLogs([].concat(_toConsumableArray(letterLog),[newLog]));}else if(INPUTS.ARROW.includes(key)){setArrowLogs([].concat(_toConsumableArray(arrowLog),[newLog]));}};return{resetGame:function resetGame(){return _resetGame();},sequence:{letters:letterSequence,arrows:arrowSequence},generateSequence:function generateSequence(){return _generateSequence();},generateCount:generateCount,changeGenerateCount:function changeGenerateCount(number){return setGenerateCount(number);},insertInput:function insertInput(keyCode){return gameButtonPress(keyCode);},gameState:gameState,progress:progress,logs:{letterLog:letterLog,arrowLog:arrowLog},stopWatch:{time:elapsedTime,start:function start(){return startStopWatch;},stop:function stop(){return stopStopWatch;},reset:function reset(){return resetStopWatch;}}};};export default useGame;","map":{"version":3,"names":["useState","useEffect","useStopWatch","_","INPUTS","Object","freeze","ARROW","LETTER","VALID_KEYS","GAME_STATE","NEW","RUNNING","END","useGame","generateCount","setGenerateCount","letterSequence","setLetterSequence","arrowSequence","setArrowSequence","elapsedTime","startStopWatch","stopStopWatch","resetStopWatch","arrow","letter","progress","setProgress","gameState","setGameState","letterLog","setLetterLogs","arrowLog","setArrowLogs","generateSequence","sequenceArrow","sequenceLetter","i","push","key","input","random","gameButtonPress","keyCode","keys","includes","toString","enteredKey","length","slice","logInput","resetGame","arrowCount","letterCount","type","wasCorrect","newLog","timePressed","correct","sequence","letters","arrows","changeGenerateCount","number","insertInput","logs","stopWatch","time","start","stop","reset"],"sources":["C:/Users/yairk/OneDrive/Desktop/wasd-master/src/hooks/useGame.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport useStopWatch from './useStopWatch'\nimport _ from 'lodash'\n\nconst INPUTS = Object.freeze({\n  ARROW: ['up', 'down', 'left', 'right'],\n  LETTER: ['w', 'a', 's', 'd']\n})\n\nconst VALID_KEYS = {\n  87: 'w',\n  65: 'a',\n  83: 's',\n  68: 'd',\n  38: 'up',\n  40: 'down',\n  37: 'left',\n  39: 'right'\n}\n\nconst GAME_STATE = {\n  NEW: 'new',\n  RUNNING: 'running',\n  END: 'end',\n}\n\nconst useGame = () => {\n  const [generateCount, setGenerateCount] = useState(20)\n  const [letterSequence, setLetterSequence] = useState([])\n  const [arrowSequence, setArrowSequence] = useState([])\n  const { elapsedTime, startStopWatch, stopStopWatch, resetStopWatch } = useStopWatch()\n  const [progress, setProgress] = useState({ arrow: 0, letter: 0 })\n  const [gameState, setGameState] = useState(GAME_STATE.NEW)\n  const [letterLog, setLetterLogs] = useState([])\n  const [arrowLog, setArrowLogs] = useState([])\n\n  // Generate new sequence \n  const generateSequence = () => {\n    let sequenceArrow = []\n    let sequenceLetter = []\n\n    for (let i = 0; i < generateCount; i++) {\n      sequenceArrow.push({key: `arrow${i}`, input: INPUTS.ARROW[_.random(3)]})\n      sequenceLetter.push({key: `letter${i}`, input: INPUTS.LETTER[_.random(3)]})\n    }\n\n    setArrowSequence(sequenceArrow)\n    setLetterSequence(sequenceLetter)\n  }\n\n\n  // Handle correct wasd⬆⬇⬅➡ inputs\n  const gameButtonPress = (keyCode) => {\n    if (Object.keys(VALID_KEYS).includes(keyCode.toString())) {\n\n      if (gameState === GAME_STATE.NEW) {\n        startStopWatch()\n        setGameState(GAME_STATE.RUNNING)\n      }\n\n      let enteredKey = VALID_KEYS[keyCode]\n\n      if (arrowSequence.length > 0) {\n        if (arrowSequence[0].input === enteredKey) {\n          setArrowSequence(arrowSequence.slice(1))\n          logInput(enteredKey, 'arrow', true)\n          return true\n        } else if (INPUTS.ARROW.includes(enteredKey)) {\n          logInput(enteredKey, 'arrow', false)\n          return false\n        }\n      }\n\n      if (letterSequence.length > 0) {\n        if (letterSequence[0].input === enteredKey) {\n          setLetterSequence(letterSequence.slice(1))\n          logInput(enteredKey, 'letter', true)\n          return true\n        } else if (INPUTS.LETTER.includes(enteredKey)) {\n          logInput(enteredKey, 'letter', false)\n          return false\n        }\n        \n      }\n      return false\n    }\n  }\n\n\n  // Check for game end\n  useEffect(() => {\n    if (arrowSequence.length === 0 && letterSequence.length === 0 && gameState !== 'new') {\n      stopStopWatch()\n      setGameState(GAME_STATE.END)\n    }\n  }, [letterSequence, arrowSequence, stopStopWatch, gameState])\n\n  // Handle reset game\n  const resetGame = () => {\n    setGameState(GAME_STATE.NEW)\n    stopStopWatch()\n    resetStopWatch()\n    generateSequence()\n    setLetterLogs([])\n    setArrowLogs([])\n  }\n\n  // Update game progress on successful key input\n  useEffect(() => {\n    const arrowCount = arrowSequence.length\n    const letterCount = letterSequence.length\n    setProgress({\n      arrow: (generateCount - arrowCount) / generateCount,\n      letter: (generateCount - letterCount) / generateCount\n    })\n  },[letterSequence, arrowSequence, setProgress, generateCount])\n\n  // Log User Input\n  const logInput = (key, type, wasCorrect) => {\n    const newLog = {\n      key,\n      type,\n      timePressed: elapsedTime,\n      correct: wasCorrect\n    }\n    if (INPUTS.LETTER.includes(key)) {\n      setLetterLogs([...letterLog, newLog])\n    } else if (INPUTS.ARROW.includes(key)) {\n      setArrowLogs([...arrowLog, newLog])\n    }\n  }\n\n  return {\n    resetGame: () => resetGame(),\n    sequence: {\n      letters: letterSequence,\n      arrows: arrowSequence\n    },\n    generateSequence: () => generateSequence(),\n    generateCount,\n    changeGenerateCount: (number) => setGenerateCount(number),\n    insertInput: (keyCode) => gameButtonPress(keyCode),\n    gameState,\n    progress,\n    logs: {\n      letterLog,\n      arrowLog\n    },\n    stopWatch: {\n      time: elapsedTime,\n      start: () => startStopWatch,\n      stop: () => stopStopWatch,\n      reset: () => resetStopWatch\n    }\n  }\n}\n\nexport default useGame;"],"mappings":"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"},"metadata":{},"sourceType":"module"}