{"ast":null,"code":"import React,{useEffect,useCallback,useRef}from'react';import useGame from'./../../hooks/useGame';import Cell from'./Cell/Cell';import ProgressBar from'./ProgressBar/ProgressBar';import Result from'./Result/Result';import{Console,StopWatch,ViewSplittor,LeftView,RightView,VerticalBorder,ResetButton}from'./style';import{BsArrowRepeat}from'react-icons/bs';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Game=function Game(){var _useGame=useGame(),sequence=_useGame.sequence,generateSequence=_useGame.generateSequence,insertInput=_useGame.insertInput,stopWatch=_useGame.stopWatch,resetGame=_useGame.resetGame,progress=_useGame.progress,gameState=_useGame.gameState,logs=_useGame.logs,generateCount=_useGame.generateCount;var ResetButtonRef=useRef();useEffect(function(){generateSequence();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var handleUserKeyPress=useCallback(function(event){if(event.keyCode===9){event.preventDefault();ResetButtonRef.current.focus();}else{insertInput(event.keyCode);}},[insertInput]);useEffect(function(){window.addEventListener('keydown',handleUserKeyPress);return function(){window.removeEventListener('keydown',handleUserKeyPress);};},[handleUserKeyPress]);var resetButtonHandler=function resetButtonHandler(){resetGame();document.activeElement.blur();};return/*#__PURE__*/_jsx(Console,{children:gameState!=='end'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StopWatch,{children:stopWatch.time.toFixed(2)}),/*#__PURE__*/_jsxs(ViewSplittor,{children:[/*#__PURE__*/_jsx(LeftView,{children:sequence.letters.map(function(item){return/*#__PURE__*/_jsx(Cell,{character:item.input,left:true},item.key);})}),/*#__PURE__*/_jsx(VerticalBorder,{}),/*#__PURE__*/_jsx(RightView,{children:sequence.arrows.map(function(item){return/*#__PURE__*/_jsx(Cell,{character:item.input,left:false},item.key);})})]}),/*#__PURE__*/_jsx(ResetButton,{onClick:resetButtonHandler,ref:ResetButtonRef,children:/*#__PURE__*/_jsx(BsArrowRepeat,{})}),/*#__PURE__*/_jsx(ProgressBar,{progress:progress})]}):/*#__PURE__*/_jsx(Result,{logs:logs,stopWatch:stopWatch,generateCount:generateCount,children:/*#__PURE__*/_jsx(ResetButton,{onClick:resetButtonHandler,ref:ResetButtonRef,children:/*#__PURE__*/_jsx(BsArrowRepeat,{})})})});};export default Game;","map":{"version":3,"names":["React","useEffect","useCallback","useRef","useGame","Cell","ProgressBar","Result","Console","StopWatch","ViewSplittor","LeftView","RightView","VerticalBorder","ResetButton","BsArrowRepeat","Game","sequence","generateSequence","insertInput","stopWatch","resetGame","progress","gameState","logs","generateCount","ResetButtonRef","handleUserKeyPress","event","keyCode","preventDefault","current","focus","window","addEventListener","removeEventListener","resetButtonHandler","document","activeElement","blur","time","toFixed","letters","map","item","input","key","arrows"],"sources":["C:/Users/yairk/OneDrive/Desktop/wasd-master/src/components/Game/Game.js"],"sourcesContent":["import React, { useEffect, useCallback, useRef } from 'react'\nimport useGame from './../../hooks/useGame'\nimport Cell from './Cell/Cell'\nimport ProgressBar from './ProgressBar/ProgressBar'\nimport Result from './Result/Result'\nimport { Console, StopWatch, ViewSplittor, LeftView, RightView, VerticalBorder, ResetButton } from './style'\nimport { BsArrowRepeat } from 'react-icons/bs'\n\nconst Game = () => {\n  const { \n    sequence,\n    generateSequence,\n    insertInput,\n    stopWatch,\n    resetGame,\n    progress,\n    gameState,\n    logs,\n    generateCount\n  } = useGame()\n\n  const ResetButtonRef = useRef();\n\n  useEffect(() => {\n    generateSequence()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const handleUserKeyPress = useCallback((event) => {\n    if(event.keyCode === 9) {\n      event.preventDefault()\n      ResetButtonRef.current.focus()\n    } else {\n      insertInput(event.keyCode)\n    }\n  },[insertInput])\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleUserKeyPress);\n    return () => {\n      window.removeEventListener('keydown', handleUserKeyPress);\n    };\n  }, [handleUserKeyPress]);\n\n  const resetButtonHandler = () => {\n    resetGame()\n    document.activeElement.blur()\n  }\n\n  return (\n    <Console>\n      { gameState !== 'end' ?\n        <>\n          <StopWatch>\n            { stopWatch.time.toFixed(2) }\n          </StopWatch>\n          <ViewSplittor>\n            <LeftView>\n              {sequence.letters.map(item => <Cell key={item.key} character={item.input} left={true} />)}\n            </LeftView>\n            <VerticalBorder />\n            <RightView>\n              {sequence.arrows.map(item => <Cell key={item.key} character={item.input} left={false} />)}\n            </RightView>\n          </ViewSplittor>\n          <ResetButton onClick={resetButtonHandler} ref={ResetButtonRef}><BsArrowRepeat /></ResetButton>\n          <ProgressBar progress={progress}/>\n        </> \n      :\n        <Result logs={logs} stopWatch={stopWatch} generateCount={generateCount}>\n          <ResetButton onClick={resetButtonHandler} ref={ResetButtonRef}><BsArrowRepeat /></ResetButton>\n        </Result>\n      }\n    </Console>\n  )\n}\n\nexport default Game"],"mappings":"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"},"metadata":{},"sourceType":"module"}